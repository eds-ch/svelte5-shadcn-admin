<!doctype html>
<html lang="%lang%">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Manrope:wght@200..800&display=swap"
			rel="stylesheet"
		/>
		<script nonce="%sveltekit.nonce%">
			(function () {
				// Cookie keys must match COOKIE in $lib/config.ts
				// (can't import $lib in inline HTML script).
				function getCookie(name) {
					var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
					return match ? decodeURIComponent(match[2]) : null;
				}

				// Allowlists must match COOKIE.valid in $lib/config.ts
				var validModes = ['light', 'dark', 'system'];
				var validFonts = ['inter', 'manrope'];
				var validPresets = ['modern-minimal', 'notebook', 'darkmatter'];

				// Apply dark mode before render to prevent flash
				var mode = getCookie('color_mode');
				if (!mode || validModes.indexOf(mode) === -1) mode = 'system';
				var isDark =
					mode === 'dark' ||
					(mode === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
				if (isDark) {
					document.documentElement.classList.add('dark');
				}

				// Apply font class before render to prevent FOUT
				var font = getCookie('font');
				if (font && validFonts.indexOf(font) !== -1) {
					document.documentElement.classList.add('font-' + font);
				}

				var preset = getCookie('theme_preset');
				if (preset && validPresets.indexOf(preset) !== -1) {
					document.documentElement.dataset.preset = preset;
				}
			})();
		</script>
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
